{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\admin\\\\Documents\\\\GitHub\\\\levelreader-react\\\\src\\\\components\\\\LibraryView.js\",\n  _s = $RefreshSig$();\nimport React, { useContext } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport AppContext from '../context/AppContext';\nimport { StorageManager } from '../storageManager';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst LibraryView = () => {\n  _s();\n  const {\n    state,\n    setState\n  } = useContext(AppContext);\n  const navigate = useNavigate();\n  const renderLessonCards = () => {\n    return Object.entries(state.lessons).map(([key, text]) => {\n      // Calculate stats\n      const rawWords = text.match(/\\p{L}+/gu) || [];\n      const words = Array.from(new Set(rawWords));\n      const filtered = words.filter(w => !state.deletedWords.includes(w));\n      const total = filtered.length;\n      const knownVals = ['1', '2', '3', 'known'];\n      const seen = filtered.filter(w => {\n        var _state$wordMetadata$w;\n        return knownVals.includes((_state$wordMetadata$w = state.wordMetadata[w]) === null || _state$wordMetadata$w === void 0 ? void 0 : _state$wordMetadata$w.fam);\n      }).length;\n      const known = filtered.filter(w => {\n        var _state$wordMetadata$w2;\n        return ((_state$wordMetadata$w2 = state.wordMetadata[w]) === null || _state$wordMetadata$w2 === void 0 ? void 0 : _state$wordMetadata$w2.fam) === 'known';\n      }).length;\n      const unknown = total - seen;\n      const pct = total ? Math.round(unknown / total * 100) : 0;\n      const progress = total ? known / total * 100 : 0;\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"lesson-card bg-secondary text-white p-4 rounded-lg cursor-pointer relative opacity-100 transition-all duration-300 hover:scale-105 origin-top-left hover:shadow-md w-64 min-h-32\",\n        onClick: () => navigate(`/lesson/${key}`),\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-lg font-bold\",\n          children: key\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 26,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"edit-lesson absolute top-2 right-2 bg-gray-600 px-2 py-1 rounded-full text-white\",\n          children: \"\\u22EE\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 27,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"unknown-percent absolute bottom-8 right-2 bg-white bg-opacity-20 px-2 py-1 rounded text-sm\",\n          children: [pct, \"% unknown\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 29,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"progress-bar bg-gray-300 h-2 rounded absolute bottom-3 left-0 right-0 mx-4\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"progress bg-primary h-full rounded\",\n            style: {\n              width: `${progress}%`\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 31,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 30,\n          columnNumber: 11\n        }, this)]\n      }, key, true, {\n        fileName: _jsxFileName,\n        lineNumber: 25,\n        columnNumber: 9\n      }, this);\n    });\n  };\n  const deleteLesson = async key => {\n    if (window.confirm('Delete this lesson?')) {\n      const newLessons = {\n        ...state.lessons\n      };\n      delete newLessons[key];\n      setState(prev => ({\n        ...prev,\n        lessons: newLessons\n      }));\n      await StorageManager.save(state);\n    }\n  };\n\n  // Add edit logic similarly\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container mx-auto p-4 overflow-visible\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-2xl font-bold mb-4 overflow-visible\",\n      children: \"\\uD83D\\uDCD6 My Lessons\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex gap-4 overflow-x-auto pb-4 overflow-visible\",\n      children: renderLessonCards()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 50,\n    columnNumber: 5\n  }, this);\n};\n_s(LibraryView, \"+H02Ps2VrNOpl3vhUjQvySH2/JE=\", false, function () {\n  return [useNavigate];\n});\n_c = LibraryView;\nexport default LibraryView;\nvar _c;\n$RefreshReg$(_c, \"LibraryView\");","map":{"version":3,"names":["React","useContext","useNavigate","AppContext","StorageManager","jsxDEV","_jsxDEV","LibraryView","_s","state","setState","navigate","renderLessonCards","Object","entries","lessons","map","key","text","rawWords","match","words","Array","from","Set","filtered","filter","w","deletedWords","includes","total","length","knownVals","seen","_state$wordMetadata$w","wordMetadata","fam","known","_state$wordMetadata$w2","unknown","pct","Math","round","progress","className","onClick","children","fileName","_jsxFileName","lineNumber","columnNumber","style","width","deleteLesson","window","confirm","newLessons","prev","save","_c","$RefreshReg$"],"sources":["C:/Users/admin/Documents/GitHub/levelreader-react/src/components/LibraryView.js"],"sourcesContent":["import React, { useContext } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport AppContext from '../context/AppContext';\r\nimport { StorageManager } from '../storageManager';\r\n\r\nconst LibraryView = () => {\r\n  const { state, setState } = useContext(AppContext);\r\n  const navigate = useNavigate();\r\n\r\n  const renderLessonCards = () => {\r\n    return Object.entries(state.lessons).map(([key, text]) => {\r\n      // Calculate stats\r\n      const rawWords = text.match(/\\p{L}+/gu) || [];\r\n      const words = Array.from(new Set(rawWords));\r\n      const filtered = words.filter(w => !state.deletedWords.includes(w));\r\n      const total = filtered.length;\r\n      const knownVals = ['1', '2', '3', 'known'];\r\n      const seen = filtered.filter(w => knownVals.includes(state.wordMetadata[w]?.fam)).length;\r\n      const known = filtered.filter(w => state.wordMetadata[w]?.fam === 'known').length;\r\n      const unknown = total - seen;\r\n      const pct = total ? Math.round((unknown / total) * 100) : 0;\r\n      const progress = total ? (known / total) * 100 : 0;\r\n\r\n      return (\r\n        <div key={key} className=\"lesson-card bg-secondary text-white p-4 rounded-lg cursor-pointer relative opacity-100 transition-all duration-300 hover:scale-105 origin-top-left hover:shadow-md w-64 min-h-32\" onClick={() => navigate(`/lesson/${key}`)}>\r\n          <h3 className=\"text-lg font-bold\">{key}</h3>\r\n          <button className=\"edit-lesson absolute top-2 right-2 bg-gray-600 px-2 py-1 rounded-full text-white\">â‹®</button>\r\n          {/* Card menu would be added here with state for show/hide */}\r\n          <span className=\"unknown-percent absolute bottom-8 right-2 bg-white bg-opacity-20 px-2 py-1 rounded text-sm\">{pct}% unknown</span>\r\n          <div className=\"progress-bar bg-gray-300 h-2 rounded absolute bottom-3 left-0 right-0 mx-4\">\r\n            <div className=\"progress bg-primary h-full rounded\" style={{ width: `${progress}%` }}></div>\r\n          </div>\r\n        </div>\r\n      );\r\n    });\r\n  };\r\n\r\n  const deleteLesson = async (key) => {\r\n    if (window.confirm('Delete this lesson?')) {\r\n      const newLessons = { ...state.lessons };\r\n      delete newLessons[key];\r\n      setState(prev => ({ ...prev, lessons: newLessons }));\r\n      await StorageManager.save(state);\r\n    }\r\n  };\r\n\r\n  // Add edit logic similarly\r\n\r\n  return (\r\n    <div className=\"container mx-auto p-4 overflow-visible\">\r\n      <h2 className=\"text-2xl font-bold mb-4 overflow-visible\">ðŸ“– My Lessons</h2>\r\n      <div className=\"flex gap-4 overflow-x-auto pb-4 overflow-visible\">\r\n        {renderLessonCards()}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LibraryView;"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,UAAU,QAAQ,OAAO;AACzC,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,OAAOC,UAAU,MAAM,uBAAuB;AAC9C,SAASC,cAAc,QAAQ,mBAAmB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEnD,MAAMC,WAAW,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACxB,MAAM;IAAEC,KAAK;IAAEC;EAAS,CAAC,GAAGT,UAAU,CAACE,UAAU,CAAC;EAClD,MAAMQ,QAAQ,GAAGT,WAAW,CAAC,CAAC;EAE9B,MAAMU,iBAAiB,GAAGA,CAAA,KAAM;IAC9B,OAAOC,MAAM,CAACC,OAAO,CAACL,KAAK,CAACM,OAAO,CAAC,CAACC,GAAG,CAAC,CAAC,CAACC,GAAG,EAAEC,IAAI,CAAC,KAAK;MACxD;MACA,MAAMC,QAAQ,GAAGD,IAAI,CAACE,KAAK,CAAC,UAAU,CAAC,IAAI,EAAE;MAC7C,MAAMC,KAAK,GAAGC,KAAK,CAACC,IAAI,CAAC,IAAIC,GAAG,CAACL,QAAQ,CAAC,CAAC;MAC3C,MAAMM,QAAQ,GAAGJ,KAAK,CAACK,MAAM,CAACC,CAAC,IAAI,CAAClB,KAAK,CAACmB,YAAY,CAACC,QAAQ,CAACF,CAAC,CAAC,CAAC;MACnE,MAAMG,KAAK,GAAGL,QAAQ,CAACM,MAAM;MAC7B,MAAMC,SAAS,GAAG,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,OAAO,CAAC;MAC1C,MAAMC,IAAI,GAAGR,QAAQ,CAACC,MAAM,CAACC,CAAC;QAAA,IAAAO,qBAAA;QAAA,OAAIF,SAAS,CAACH,QAAQ,EAAAK,qBAAA,GAACzB,KAAK,CAAC0B,YAAY,CAACR,CAAC,CAAC,cAAAO,qBAAA,uBAArBA,qBAAA,CAAuBE,GAAG,CAAC;MAAA,EAAC,CAACL,MAAM;MACxF,MAAMM,KAAK,GAAGZ,QAAQ,CAACC,MAAM,CAACC,CAAC;QAAA,IAAAW,sBAAA;QAAA,OAAI,EAAAA,sBAAA,GAAA7B,KAAK,CAAC0B,YAAY,CAACR,CAAC,CAAC,cAAAW,sBAAA,uBAArBA,sBAAA,CAAuBF,GAAG,MAAK,OAAO;MAAA,EAAC,CAACL,MAAM;MACjF,MAAMQ,OAAO,GAAGT,KAAK,GAAGG,IAAI;MAC5B,MAAMO,GAAG,GAAGV,KAAK,GAAGW,IAAI,CAACC,KAAK,CAAEH,OAAO,GAAGT,KAAK,GAAI,GAAG,CAAC,GAAG,CAAC;MAC3D,MAAMa,QAAQ,GAAGb,KAAK,GAAIO,KAAK,GAAGP,KAAK,GAAI,GAAG,GAAG,CAAC;MAElD,oBACExB,OAAA;QAAesC,SAAS,EAAC,kLAAkL;QAACC,OAAO,EAAEA,CAAA,KAAMlC,QAAQ,CAAC,WAAWM,GAAG,EAAE,CAAE;QAAA6B,QAAA,gBACpPxC,OAAA;UAAIsC,SAAS,EAAC,mBAAmB;UAAAE,QAAA,EAAE7B;QAAG;UAAA8B,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAK,CAAC,eAC5C5C,OAAA;UAAQsC,SAAS,EAAC,kFAAkF;UAAAE,QAAA,EAAC;QAAC;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,eAE/G5C,OAAA;UAAMsC,SAAS,EAAC,4FAA4F;UAAAE,QAAA,GAAEN,GAAG,EAAC,WAAS;QAAA;UAAAO,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAM,CAAC,eAClI5C,OAAA;UAAKsC,SAAS,EAAC,4EAA4E;UAAAE,QAAA,eACzFxC,OAAA;YAAKsC,SAAS,EAAC,oCAAoC;YAACO,KAAK,EAAE;cAAEC,KAAK,EAAE,GAAGT,QAAQ;YAAI;UAAE;YAAAI,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACzF,CAAC;MAAA,GAPEjC,GAAG;QAAA8B,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAQR,CAAC;IAEV,CAAC,CAAC;EACJ,CAAC;EAED,MAAMG,YAAY,GAAG,MAAOpC,GAAG,IAAK;IAClC,IAAIqC,MAAM,CAACC,OAAO,CAAC,qBAAqB,CAAC,EAAE;MACzC,MAAMC,UAAU,GAAG;QAAE,GAAG/C,KAAK,CAACM;MAAQ,CAAC;MACvC,OAAOyC,UAAU,CAACvC,GAAG,CAAC;MACtBP,QAAQ,CAAC+C,IAAI,KAAK;QAAE,GAAGA,IAAI;QAAE1C,OAAO,EAAEyC;MAAW,CAAC,CAAC,CAAC;MACpD,MAAMpD,cAAc,CAACsD,IAAI,CAACjD,KAAK,CAAC;IAClC;EACF,CAAC;;EAED;;EAEA,oBACEH,OAAA;IAAKsC,SAAS,EAAC,wCAAwC;IAAAE,QAAA,gBACrDxC,OAAA;MAAIsC,SAAS,EAAC,0CAA0C;MAAAE,QAAA,EAAC;IAAa;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,eAC3E5C,OAAA;MAAKsC,SAAS,EAAC,kDAAkD;MAAAE,QAAA,EAC9DlC,iBAAiB,CAAC;IAAC;MAAAmC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACjB,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEV,CAAC;AAAC1C,EAAA,CAnDID,WAAW;EAAA,QAEEL,WAAW;AAAA;AAAAyD,EAAA,GAFxBpD,WAAW;AAqDjB,eAAeA,WAAW;AAAC,IAAAoD,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}