{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\admin\\\\Documents\\\\GitHub\\\\levelreader-react\\\\src\\\\components\\\\ImportView.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useContext } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport AppContext from '../context/AppContext';\nimport { StorageManager } from '../storageManager';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ImportView = () => {\n  _s();\n  const {\n    state,\n    setState\n  } = useContext(AppContext);\n  const navigate = useNavigate();\n  const [title, setTitle] = useState('');\n  const [text, setText] = useState('');\n  const handleFileChange = e => {\n    const file = e.target.files[0];\n    if (file) {\n      const formData = new FormData();\n      formData.append('file', file);\n      fetch('http://localhost:5000/upload', {\n        method: 'POST',\n        body: formData\n      }).then(res => res.json()).then(data => {\n        if (data.text) setText(data.text);else alert(data.error || 'Failed to extract text');\n      }).catch(err => {\n        console.error(err);\n        const reader = new FileReader();\n        reader.onload = ev => setText(ev.target.result);\n        reader.readAsText(file);\n      });\n    }\n  };\n  const handleSave = async () => {\n    if (title && text) {\n      if (state.lessons[title]) return alert('Title already exists.');\n      setState(prev => ({\n        ...prev,\n        lessons: {\n          ...prev.lessons,\n          [title]: text\n        }\n      }));\n      await StorageManager.save(state);\n      navigate('/library');\n    } else {\n      alert('Title and text required.');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container mx-auto p-4\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-2xl font-bold mb-4\",\n      children: \"Import Lesson\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-col items-center w-full\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"mb-1 text-white text-center\",\n        children: \"Add title (max 60 characters):\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        maxLength: 60,\n        value: title,\n        onChange: e => setTitle(e.target.value),\n        className: \"w-1/2 p-4 mb-2 border rounded bg-white text-black text-xl text-center\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"mb-1 text-white text-center\",\n        children: \"Add description (optional):\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        value: text,\n        onChange: e => setText(e.target.value),\n        className: \"w-1/2 h-48 p-4 mb-2 border rounded bg-white text-black text-xl text-center\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"mb-1 text-white text-center\",\n        children: \"Upload File:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        onChange: handleFileChange,\n        className: \"mb-2\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleSave,\n        className: \"px-5 py-2 bg-primary text-white rounded hover:bg-blue-600\",\n        children: \"Save and generate lesson\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 5\n  }, this);\n};\n_s(ImportView, \"u2/f8Ey1L9pjPOOcvhqm+DF1NIk=\", false, function () {\n  return [useNavigate];\n});\n_c = ImportView;\nexport default ImportView;\nvar _c;\n$RefreshReg$(_c, \"ImportView\");","map":{"version":3,"names":["React","useState","useContext","useNavigate","AppContext","StorageManager","jsxDEV","_jsxDEV","ImportView","_s","state","setState","navigate","title","setTitle","text","setText","handleFileChange","e","file","target","files","formData","FormData","append","fetch","method","body","then","res","json","data","alert","error","catch","err","console","reader","FileReader","onload","ev","result","readAsText","handleSave","lessons","prev","save","className","children","fileName","_jsxFileName","lineNumber","columnNumber","type","maxLength","value","onChange","onClick","_c","$RefreshReg$"],"sources":["C:/Users/admin/Documents/GitHub/levelreader-react/src/components/ImportView.js"],"sourcesContent":["import React, { useState, useContext } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport AppContext from '../context/AppContext';\r\nimport { StorageManager } from '../storageManager';\r\n\r\nconst ImportView = () => {\r\n  const { state, setState } = useContext(AppContext);\r\n  const navigate = useNavigate();\r\n  const [title, setTitle] = useState('');\r\n  const [text, setText] = useState('');\r\n\r\n  const handleFileChange = (e) => {\r\n    const file = e.target.files[0];\r\n    if (file) {\r\n      const formData = new FormData();\r\n      formData.append('file', file);\r\n      fetch('http://localhost:5000/upload', {\r\n        method: 'POST',\r\n        body: formData\r\n      })\r\n      .then(res => res.json())\r\n      .then(data => {\r\n        if (data.text) setText(data.text);\r\n        else alert(data.error || 'Failed to extract text');\r\n      })\r\n      .catch(err => {\r\n        console.error(err);\r\n        const reader = new FileReader();\r\n        reader.onload = (ev) => setText(ev.target.result);\r\n        reader.readAsText(file);\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    if (title && text) {\r\n      if (state.lessons[title]) return alert('Title already exists.');\r\n      setState(prev => ({ ...prev, lessons: { ...prev.lessons, [title]: text } }));\r\n      await StorageManager.save(state);\r\n      navigate('/library');\r\n    } else {\r\n      alert('Title and text required.');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"container mx-auto p-4\">\r\n      <h2 className=\"text-2xl font-bold mb-4\">Import Lesson</h2>\r\n      <div className=\"flex flex-col items-center w-full\">\r\n        <label className=\"mb-1 text-white text-center\">Add title (max 60 characters):</label>\r\n        <input type=\"text\" maxLength={60} value={title} onChange={e => setTitle(e.target.value)} className=\"w-1/2 p-4 mb-2 border rounded bg-white text-black text-xl text-center\" />\r\n        <label className=\"mb-1 text-white text-center\">Add description (optional):</label>\r\n        <textarea value={text} onChange={e => setText(e.target.value)} className=\"w-1/2 h-48 p-4 mb-2 border rounded bg-white text-black text-xl text-center\" />\r\n        <label className=\"mb-1 text-white text-center\">Upload File:</label>\r\n        <input type=\"file\" onChange={handleFileChange} className=\"mb-2\" />\r\n        <button onClick={handleSave} className=\"px-5 py-2 bg-primary text-white rounded hover:bg-blue-600\">Save and generate lesson</button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ImportView;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}